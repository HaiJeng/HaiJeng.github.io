<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Kyons&#39;Blog</title>
    <link>https://haijeng.github.io/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>自闭在校大学生一枚,欢迎交流.</description>
    <pubDate>Wed, 20 May 2020 16:07:24 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>ICPC Central Europe Regional Contest 2019 D.Deep800080</title>
      <link>https://haijeng.github.io/2020/05/21/ICPC-Central-Europe-Regional-Contest-2019-D-Deep800080/</link>
      <guid>https://haijeng.github.io/2020/05/21/ICPC-Central-Europe-Regional-Contest-2019-D-Deep800080/</guid>
      <pubDate>Wed, 20 May 2020 16:02:16 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;题目链接&quot;&gt;&lt;a href=&quot;#题目链接&quot; class=&quot;headerlink&quot; title=&quot;题目链接&quot;&gt;&lt;/a&gt;题目链接&lt;/h2&gt;&lt;p&gt;戳此处&lt;a href=&quot;https://nanti.jisuanke.com/t/44993&quot; target=&quot;_blank
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="题目链接"><a href="#题目链接" class="headerlink" title="题目链接"></a>题目链接</h2><p>戳此处<a href="https://nanti.jisuanke.com/t/44993" target="_blank" rel="noopener">🗡</a><br>数据下载<a href="https://download.csdn.net/download/UnKfrozen/12436290" target="_blank" rel="noopener">┏┛墓┗┓…(((m -__-)m))</a></p><h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p><strong>注意，此处码头指的是一条直线。。</strong></p><blockquote><p> a straight line passing throughtwo distinct points with coordinates (0, 0)(0,0) and (A, B)(A,B).</p></blockquote><p>我们考虑，在一条直线上，以点$o$为圆心，$r$为半径的一个圆，如何才能将一个点$p$包含?<br>显然，以$p$为圆心,同样的做一个半径$r$的圆，其与直线的两个交点形成的线段，便是$o$的取值范围。<br>如图1：<br><img src="https://i.loli.net/2020/05/21/PnQkAGLfjcpMTI8.png" alt="1.jpg"><br>于是乎，题目就从，如何在线上找一点，使得其做的圆包含点最多，变成了线段重叠问题。<br>问哪个地方线段重叠最多，显然是扫描线类型的题目。<br>按照一个方向扫过去，碰到一个线段的起点便$ans+=1$，碰到线段的末尾$ans-=1$<br>如此扫一遍，每次$ans$更改时取一次$maxx$，扫完后的$maxx$便是答案。</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><div><div class="fold_hider"><div class="close hider_title">代码如下</div></div><div class="fold"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#include &lt;algorithm&gt;</span></span><br><span class="line"><span class="comment">#include &lt;bitset&gt;</span></span><br><span class="line"><span class="comment">#include &lt;cmath&gt;</span></span><br><span class="line"><span class="comment">#include &lt;iostream&gt;</span></span><br><span class="line"><span class="comment">#include &lt;string.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;vector&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> comment(linker, <span class="meta-string">"/STACK:102400000,102400000"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(3, <span class="meta-string">"Ofast"</span>, <span class="meta-string">"inline"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ext/pb_ds/priority_queue.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> __gnu_pbds;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf __INT_MAX__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> enf INT_MIN</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF LLONG_MAX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ENF LLONG_MIN</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> zhengfu(x) ((x &gt; eps) - (x &lt; -eps))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">point</span> <span class="title">vec</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> <span class="comment">//点的基本数据结构</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> poe;</span><br><span class="line">    point(<span class="keyword">double</span> _x = <span class="number">0</span>, <span class="keyword">double</span> _y = <span class="number">0</span>)</span><br><span class="line">        : x(_x), y(_y) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">()</span> <span class="comment">//模长</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sqrt</span>(x * x + y * y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vec <span class="title">chuizhi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> vec(-y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span>*(<span class="keyword">const</span> point &amp;i_T) <span class="keyword">const</span> <span class="comment">//点积</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x * i_T.x + y * i_T.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span>^(<span class="keyword">const</span> point &amp;i_T) <span class="keyword">const</span> <span class="comment">//叉积</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x * i_T.y - y * i_T.x;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>*(<span class="keyword">double</span> u) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x * u, y * u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> point &amp;i_T) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">fabs</span>(x - i_T.x) &lt; eps &amp;&amp; <span class="built_in">fabs</span>(y - i_T.y) &lt; eps;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>/(<span class="keyword">double</span> u) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x / u, y / u);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>+(<span class="keyword">const</span> point &amp;i_T) &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x + i_T.x, y + i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>-(<span class="keyword">const</span> point &amp;i_T) &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x - i_T.x, y - i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(point a, point b) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">fabs</span>(a.y - b.y) &lt; eps ? a.x &lt; b.x : a.y &lt; b.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, point &amp;a) &#123;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; a.x &lt;&lt; ' ' &lt;&lt; a.y;</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.8f %.8f"</span>, a.x, a.y);</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, point &amp;a) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;a.x, &amp;a.y);</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cirles</span> &#123;</span></span><br><span class="line">    point o;</span><br><span class="line">    <span class="keyword">double</span> r;</span><br><span class="line">    cirles(point _o = point(), <span class="keyword">double</span> _r = <span class="number">0.0</span>)</span><br><span class="line">        : r(_r), o(_o) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">point <span class="title">Point</span><span class="params">(<span class="keyword">double</span> t)</span> <span class="comment">//圆上任意一点</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> point(o.x + r * <span class="built_in">cos</span>(t), o.y + r * <span class="built_in">sin</span>(t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, cirles &amp;a) &#123;</span><br><span class="line">        in &gt;&gt; a.o &gt;&gt; a.r;</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, cirles &amp;a) &#123;</span><br><span class="line">        out &lt;&lt; a.o &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.8f"</span>, a.r);</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Line</span> <span class="title">Segment</span>;</span> <span class="comment">//线段Segment</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Line</span> &#123;</span>                <span class="comment">//直线</span></span><br><span class="line">    point a, b;</span><br><span class="line">    <span class="keyword">double</span> poe;</span><br><span class="line">    Line(point _a = point(), point _b = point())</span><br><span class="line">        : a(_a), b(_b) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (a - b).len();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, Line &amp;a) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a.a &gt;&gt; a.b;</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, Line &amp;a) &#123;</span><br><span class="line">        out &lt;&lt; a.a &lt;&lt; <span class="string">' '</span> &lt;&lt; a.b;</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">in</span><span class="params">(point pi)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (b &lt; a)</span><br><span class="line">            <span class="keyword">return</span> ((b == pi || b &lt; pi) &amp;&amp; (a == pi || pi &lt; a));</span><br><span class="line">        <span class="keyword">return</span> ((a == pi || a &lt; pi) &amp;&amp; (b == pi || pi &lt; b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(b.y - a.y, b.x - a.x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">point <span class="title">zhixian_zhixian_jiaodian</span><span class="params">(Line l1, Line l2)</span> <span class="comment">//两直线交点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> t = ((l1.a.x - l2.a.x) * (l2.a.y - l2.b.y) - (l1.a.y - l2.a.y) * (l2.a.x - l2.b.x)) / ((l1.a.x - l1.b.x) * (l2.a.y - l2.b.y) - (l1.a.y - l1.b.y) * (l2.a.x - l2.b.x));</span><br><span class="line">    <span class="keyword">return</span> l1.a + (l1.b - l1.a) * t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">zhixian_yuanxin_juli</span><span class="params">(Line l, cirles a)</span> <span class="comment">//直线到圆心的距离</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>((a.o - l.a) ^ (l.b - l.a)) / (l.b - l.a).len();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bijiao</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(x - y) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">zhixian_yuan_jiaodian</span><span class="params">(cirles c, Line l, point &amp;p1, point &amp;p2)</span> </span>&#123; <span class="comment">//直线与圆交点以及个数</span></span><br><span class="line">    <span class="keyword">if</span> (zhixian_yuanxin_juli(l, c) &gt; c.r)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    point pi = c.o;</span><br><span class="line">    pi.x += l.a.y - l.b.y;</span><br><span class="line">    pi.y += l.b.x - l.a.x;</span><br><span class="line">    pi = zhixian_zhixian_jiaodian(Line(pi, c.o), l);</span><br><span class="line">    <span class="keyword">double</span> t = <span class="built_in">sqrt</span>(c.r * c.r - (pi - c.o).len() * (pi - c.o).len()) / (l.a - l.b).len();</span><br><span class="line">    p1 = pi - (l.b - l.a) * t;</span><br><span class="line">    p2 = pi + (l.b - l.a) * t;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + !(bijiao(p1.x, p2.x) == <span class="number">0</span> &amp;&amp; bijiao(p1.y, p2.y) == <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(point a, point b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (bijiao(a.x, b.x) == <span class="number">0</span> ? (bijiao(a.y, b.y) == <span class="number">0</span> ? a.poe &gt; b.poe : a.y &lt; b.y) : a.x &lt; b.x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Line l;</span><br><span class="line">    <span class="keyword">int</span> n, r;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; r &gt;&gt; l.b;</span><br><span class="line">    <span class="built_in">vector</span>&lt;cirles&gt; c(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> &amp;p : c) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p.o;</span><br><span class="line">        p.r = r + eps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;point&gt; p;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it : c) &#123;</span><br><span class="line">        point p1, p2;</span><br><span class="line">        <span class="keyword">if</span> (zhixian_yuan_jiaodian(it, l, p1, p2)) &#123;</span><br><span class="line">            p1.poe = <span class="number">1</span>;</span><br><span class="line">            p2.poe = <span class="number">-1</span>;</span><br><span class="line">            p.push_back(p1), p.push_back(p2);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p.begin(), p.end(), cmp);</span><br><span class="line">    ll maxx = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> it : p) &#123;</span><br><span class="line">        sum += it.poe;</span><br><span class="line">        maxx = max(maxx, <span class="built_in">abs</span>(sum));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; maxx &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div>]]></content:encoded>
      
      <comments>https://haijeng.github.io/2020/05/21/ICPC-Central-Europe-Regional-Contest-2019-D-Deep800080/#disqus_thread</comments>
    </item>
    
    <item>
      <title>HDU6603 Azshara&#39;s deep sea</title>
      <link>https://haijeng.github.io/2020/05/20/HDU6603-Azshara-s-deep-sea/</link>
      <guid>https://haijeng.github.io/2020/05/20/HDU6603-Azshara-s-deep-sea/</guid>
      <pubDate>Wed, 20 May 2020 15:09:34 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;题目大意&quot;&gt;&lt;a href=&quot;#题目大意&quot; class=&quot;headerlink&quot; title=&quot;题目大意&quot;&gt;&lt;/a&gt;题目大意&lt;/h2&gt;&lt;p&gt;题目很长，是有关于WOW的一个攻略出的模拟题。&lt;br&gt;大致意思就是&lt;br&gt;给你一堆点和一堆圆，问你在符合题意下，最多能连几条
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h2><p>题目很长，是有关于WOW的一个攻略出的模拟题。<br>大致意思就是<br>给你一堆点和一堆圆，问你在符合题意下，最多能连几条线段。<br>要求如下： </p><ol><li>线段不能相交，端点重合除外</li><li>线段不能与圆相交或相切</li><li>线段两个端点不能相邻，如$(i,i+1)$ 或$(i-1,i)$</li><li>端点必须最靠外</li></ol><p>根据这四条要求,就可以做了…</p><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>首先，端点必须最靠外，就是说端点是凸包上的点。就是说 ，先跑个凸包。<br>其次，线段两个端点不相邻，且不与圆相交或相切，枚举一遍就好了。<br>最后，考虑线段不相交。线段端点都是凸包上的点，那么只要满足，线段$ab$和线段$cd$，$c&lt;a\&amp;\&amp;b&lt;d$即可。<br>如图1：<br><img src="https://i.loli.net/2020/05/20/uwqnQjALKra3yUo.jpg" alt="1.jpg"><br>因此题目变成了，求最大线段不相交数量。嗯，显然dp。<br>然后考虑上面凸包线段不相交的性质，是一种包含关系。可以得出，这是一个区间dp。<br>然后就是，枚举小区间，再求大区间了。<br>$dp[i][j]=max(dp[i][j],dp[i][t]+dp[t][j]+dk[i][j]);$<br>其中，$dk$指的是该线段是否是符合$2$，$3$，$4$的，符合为$1$，不符合为$0$</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><div><div class="fold_hider"><div class="close hider_title">代码如下</div></div><div class="fold"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#pragma comment(linker, "/STACK:102400000,102400000")</span></span><br><span class="line"><span class="comment">#pragma GCC optimize(3, "Ofast", "inline")</span></span><br><span class="line"><span class="comment">#include &lt;bits/stdc++.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;ext/pb_ds/priority_queue.hpp&gt;</span></span><br><span class="line"><span class="comment">using namespace __gnu_pbds;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf __INT_MAX__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> enf INT_MIN</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INF LLONG_MAX</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ENF LLONG_MIN</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> zhengfu(x) ((x &gt; eps) - (x &lt; -eps))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">point</span> <span class="title">vec</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> <span class="comment">//点的基本数据结构</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="keyword">double</span> poe;</span><br><span class="line">    point(<span class="keyword">double</span> _x = <span class="number">0</span>, <span class="keyword">double</span> _y = <span class="number">0</span>)</span><br><span class="line">        : x(_x), y(_y) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">()</span> <span class="comment">//模长</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sqrt</span>(x * x + y * y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">vec <span class="title">chuizhi</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> vec(-y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span>*(<span class="keyword">const</span> point &amp;i_T) <span class="keyword">const</span> <span class="comment">//点积</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x * i_T.x + y * i_T.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span>^(<span class="keyword">const</span> point &amp;i_T) <span class="keyword">const</span> <span class="comment">//叉积</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x * i_T.y - y * i_T.x;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>*(<span class="keyword">double</span> u) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x * u, y * u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> point &amp;i_T) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">fabs</span>(x - i_T.x) &lt; eps &amp;&amp; <span class="built_in">fabs</span>(y - i_T.y) &lt; eps;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>/(<span class="keyword">double</span> u) <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x / u, y / u);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>+(<span class="keyword">const</span> point &amp;i_T) &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x + i_T.x, y + i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>-(<span class="keyword">const</span> point &amp;i_T) &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x - i_T.x, y - i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(point a, point b) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">fabs</span>(a.y - b.y) &lt; eps ? a.x &lt; b.x : a.y &lt; b.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, point &amp;a) &#123;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; a.x &lt;&lt; ' ' &lt;&lt; a.y;</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.8f %.8f"</span>, a.x, a.y);</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, point &amp;a) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;a.x, &amp;a.y);</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">cirles</span> &#123;</span></span><br><span class="line">    point o;</span><br><span class="line">    <span class="keyword">double</span> r;</span><br><span class="line">    cirles(point _o = point(), <span class="keyword">double</span> _r = <span class="number">0.0</span>)</span><br><span class="line">        : r(_r), o(_o) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">point <span class="title">Point</span><span class="params">(<span class="keyword">double</span> t)</span> <span class="comment">//圆上任意一点</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> point(o.x + r * <span class="built_in">cos</span>(t), o.y + r * <span class="built_in">sin</span>(t));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, cirles &amp;a) &#123;</span><br><span class="line">        in &gt;&gt; a.o &gt;&gt; a.r;</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, cirles &amp;a) &#123;</span><br><span class="line">        out &lt;&lt; a.o &lt;&lt; <span class="string">' '</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.8f"</span>, a.r);</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Line</span> <span class="title">Segment</span>;</span> <span class="comment">//线段Segment</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Line</span> &#123;</span>                <span class="comment">//直线</span></span><br><span class="line">    point a, b;</span><br><span class="line">    <span class="keyword">double</span> poe;</span><br><span class="line">    Line(point _a = point(), point _b = point())</span><br><span class="line">        : a(_a), b(_b) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (a - b).len();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">in</span><span class="params">(point pi)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (b &lt; a)</span><br><span class="line">            <span class="keyword">return</span> ((b == pi || b &lt; pi) &amp;&amp; (a == pi || pi &lt; a));</span><br><span class="line">        <span class="keyword">return</span> ((a == pi || a &lt; pi) &amp;&amp; (b == pi || pi &lt; b));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream &amp;in, Line &amp;a) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a.a &gt;&gt; a.b;</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, Line &amp;a) &#123;</span><br><span class="line">        out &lt;&lt; a.a &lt;&lt; <span class="string">' '</span> &lt;&lt; a.b;</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(b.y - a.y, b.x - a.x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">xuanzhuan</span><span class="params">(vec a, vec b, vec c)</span> <span class="comment">//求三点叉积，正为(b-a)-&gt;(c-a)左旋</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (b - a) ^ (c - a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Andrew</span><span class="params">(point po[], <span class="keyword">int</span> n, point qo[], <span class="keyword">int</span> &amp;tail)</span> <span class="comment">//求凸包,&lt;0则包含凸包边上的点,&lt;=0则只输出拐点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sort(po + <span class="number">1</span>, po + <span class="number">1</span> + n);</span><br><span class="line">    tail = <span class="number">1</span>;</span><br><span class="line">    qo[<span class="number">1</span>] = po[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (tail &gt; <span class="number">1</span> &amp;&amp; xuanzhuan(qo[tail - <span class="number">1</span>], qo[tail], po[i]) &lt;= <span class="number">0</span>)</span><br><span class="line">            tail--;</span><br><span class="line">        qo[++tail] = po[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> basic = tail;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span> (tail &gt; basic &amp;&amp; xuanzhuan(qo[tail - <span class="number">1</span>], qo[tail], po[i]) &lt;= <span class="number">0</span>)</span><br><span class="line">            tail--;</span><br><span class="line">        qo[++tail] = po[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">zhixian_yuanxin_juli</span><span class="params">(Line l, cirles a)</span> <span class="comment">//直线到圆心的距离</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>((a.o - l.a) ^ (l.b - l.a)) / (l.b - l.a).len();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(Segment si, cirles ci[], <span class="keyword">int</span> g)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= g; i++)</span><br><span class="line">        <span class="keyword">if</span> (zhixian_yuanxin_juli(si, ci[i]) &lt;= ci[i].r)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">point p[MAXN], q[MAXN];</span><br><span class="line">cirles c[MAXN];</span><br><span class="line"><span class="keyword">int</span> dk[MAXN][MAXN], dp[MAXN][MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        <span class="keyword">int</span> n, g, r;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; g &gt;&gt; r;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                dp[i][j] = dk[i][j] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; p[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= g; i++) &#123;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; c[i].o;</span><br><span class="line">            c[i].r = r;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> tail;</span><br><span class="line">        Andrew(p, n, q, tail);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; tail; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">2</span>; j &lt; tail - (i == <span class="number">1</span>); j++)</span><br><span class="line">                <span class="keyword">if</span> (check(Segment(q[i], q[j]), c, g))</span><br><span class="line">                    dk[i][j] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">2</span>; k &lt;= n; k++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n - k; i++) &#123;</span><br><span class="line">                <span class="keyword">int</span> j = i + k;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> t = i + <span class="number">1</span>; t &lt; j; t++)</span><br><span class="line">                    dp[i][j] = max(dp[i][j], dp[i][t] + dp[t][j] + dk[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = enf;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; tail; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">2</span>; j &lt; tail - (i == <span class="number">1</span>); j++)</span><br><span class="line">                ans = max(ans, dp[i][j]);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">5 3 1</span></span><br><span class="line"><span class="comment">6 10</span></span><br><span class="line"><span class="comment">10 7</span></span><br><span class="line"><span class="comment">9 1</span></span><br><span class="line"><span class="comment">2 0</span></span><br><span class="line"><span class="comment">0 3</span></span><br><span class="line"><span class="comment">2 2</span></span><br><span class="line"><span class="comment">5 6</span></span><br><span class="line"><span class="comment">8 3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div></div>]]></content:encoded>
      
      <comments>https://haijeng.github.io/2020/05/20/HDU6603-Azshara-s-deep-sea/#disqus_thread</comments>
    </item>
    
    <item>
      <title>JSOI2018 战争</title>
      <link>https://haijeng.github.io/2019/09/16/JSOI2018-%E6%88%98%E4%BA%89/</link>
      <guid>https://haijeng.github.io/2019/09/16/JSOI2018-%E6%88%98%E4%BA%89/</guid>
      <pubDate>Mon, 16 Sep 2019 04:05:52 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;大意&quot;&gt;&lt;a href=&quot;#大意&quot; class=&quot;headerlink&quot; title=&quot;大意&quot;&gt;&lt;/a&gt;大意&lt;/h2&gt;&lt;p&gt;为了阻止战争,你就是,天选之人~~&lt;/p&gt;
&lt;h2 id=&quot;解析&quot;&gt;&lt;a href=&quot;#解析&quot; class=&quot;headerlink&quot; tit
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="大意"><a href="#大意" class="headerlink" title="大意"></a>大意</h2><p>为了阻止战争,你就是,天选之人~~</p><h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p>假设$a\in A,b\in B$,存在向量$w$,使得$b+w=a$,那么根据闵可夫斯基差,可以得到$A-B=\{w\rvert w+B\subseteq A\}$<br>当然,解题都是怎么方便怎么来,我们直接将$B$取反,然后和$A$求个闵可夫斯基和就完事了.<br>最后再判断所给点在不在C里,就完事了<br>哦,要对$A,B$进行一次求凸包,去掉边上的点<br>然后再对$C$求一次.</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><div><div class="fold_hider"><div class="close hider_title">代码戳我戳我</div></div><div class="fold"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> inf = <span class="number">1e100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-12</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">point</span> <span class="title">vec</span>;</span> <span class="comment">//向量vec</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> <span class="comment">//点的基本数据结构</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="keyword">double</span> poe;</span><br><span class="line">    point(<span class="keyword">double</span> _x = <span class="number">0</span>, <span class="keyword">double</span> _y = <span class="number">0</span>)</span><br><span class="line">        : x(_x)</span><br><span class="line">        , y(_y)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">()</span> <span class="comment">//向量模长的平方</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x * x + y * y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span>*(<span class="keyword">const</span> point&amp; i_T) <span class="keyword">const</span> <span class="comment">//点积</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x * i_T.x + y * i_T.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span>^(<span class="keyword">const</span> point&amp; i_T) <span class="keyword">const</span> <span class="comment">//叉积</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x * i_T.y - y * i_T.x;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>*(<span class="keyword">double</span> u) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x * u, y * u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> point&amp; i_T) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x == i_T.x &amp;&amp; y == i_T.y;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>/(<span class="keyword">double</span> u) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x / u, y / u);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>+(<span class="keyword">const</span> point&amp; i_T)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x + i_T.x, y + i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>-(<span class="keyword">const</span> point&amp; i_T)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x - i_T.x, y - i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(point a, point b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">fabs</span>(a.y - b.y) &lt; eps ? a.x &lt; b.x : a.y &lt; b.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, point&amp; a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; a.x &lt;&lt; ' ' &lt;&lt; a.y;</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.0f %.0f"</span>, a.x, a.y);</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; in, point&amp; a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;a.x, &amp;a.y);</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bijiao</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(x - y) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(vec a, vec b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bijiao(a.poe, b.poe) == <span class="number">0</span> ? (a ^ b) &gt;= <span class="number">0</span> : a.poe &lt; b.poe;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">xuanzhuan</span><span class="params">(vec a, vec b, vec c)</span> <span class="comment">//求三点叉积</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (b - a) ^ (c - a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Andrew</span><span class="params">(<span class="keyword">int</span>&amp; tail, point cl[], <span class="keyword">int</span> n, point ql[])</span> <span class="comment">//求凸包</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sort(cl + <span class="number">1</span>, cl + <span class="number">1</span> + n);</span><br><span class="line">    tail = <span class="number">1</span>;</span><br><span class="line">    ql[<span class="number">1</span>] = cl[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (tail &gt; <span class="number">1</span> &amp;&amp; xuanzhuan(ql[tail - <span class="number">1</span>], ql[tail], cl[i]) &lt;= <span class="number">0</span>)</span><br><span class="line">            tail--;</span><br><span class="line">        ql[++tail] = cl[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> basic = tail;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">while</span> (tail &gt; basic &amp;&amp; xuanzhuan(ql[tail - <span class="number">1</span>], ql[tail], cl[i]) &lt;= <span class="number">0</span>)</span><br><span class="line">            tail--;</span><br><span class="line">        ql[++tail] = cl[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Minkefusiji</span><span class="params">(point s[], <span class="keyword">int</span>&amp; cnt, point pl1[], <span class="keyword">int</span> tail1, point pl2[], <span class="keyword">int</span> tail2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    s[cnt = <span class="number">1</span>] = pl1[<span class="number">1</span>] + pl2[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tail1; i++)</span><br><span class="line">        pl1[i] = pl1[i + <span class="number">1</span>] - pl1[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tail2; i++)</span><br><span class="line">        pl2[i] = pl2[i + <span class="number">1</span>] - pl2[i];</span><br><span class="line">    <span class="keyword">int</span> a1 = <span class="number">1</span>, a2 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (a1 &lt;= tail1 &amp;&amp; a2 &lt;= tail2) &#123;</span><br><span class="line">        ++cnt;</span><br><span class="line">        <span class="keyword">if</span> ((pl1[a1] ^ pl2[a2]) &gt;= <span class="number">0</span>)</span><br><span class="line">            s[cnt] = s[cnt - <span class="number">1</span>] + pl1[a1++];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            s[cnt] = s[cnt - <span class="number">1</span>] + pl2[a2++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (a1 &lt;= tail1)</span><br><span class="line">        ++cnt, s[cnt] = s[cnt - <span class="number">1</span>] + pl1[a1++];</span><br><span class="line">    <span class="keyword">while</span> (a2 &lt;= tail2)</span><br><span class="line">        ++cnt, s[cnt] = s[cnt - <span class="number">1</span>] + pl2[a2++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(point A, point B)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (A ^ B) &gt; <span class="number">0</span> || ((A ^ B) == <span class="number">0</span> &amp;&amp; A.len() &lt; B.len());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dian_in_tubao</span><span class="params">(point a, point p[], <span class="keyword">int</span> tail)</span>    <span class="comment">//包含边界</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((a ^ p[<span class="number">1</span>]) &gt; <span class="number">0</span> || (p[tail] ^ a) &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> ps = lower_bound(p + <span class="number">1</span>, p + tail + <span class="number">1</span>, a, cmp2) - p - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> ((a - p[ps]) ^ (p[ps % tail + <span class="number">1</span>] - p[ps])) &lt;= <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">point p[MAXN], q2[MAXN], q1[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m, n, q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m &gt;&gt; n &gt;&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p[i];</span><br><span class="line">    <span class="keyword">int</span> tail1;</span><br><span class="line">    Andrew(tail1, p, m, q1);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p[i];</span><br><span class="line">        p[i].x = -p[i].x, p[i].y = -p[i].y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> tail2;</span><br><span class="line">    Andrew(tail2, p, n, q2);</span><br><span class="line">    tail1--, tail2--;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cnt, tail;</span><br><span class="line">    Minkefusiji(p, cnt, q1, tail1, q2, tail2);</span><br><span class="line"></span><br><span class="line">    Andrew(tail, p, cnt, q1);</span><br><span class="line">    tail--;</span><br><span class="line">    point bs = q1[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tail; i++)</span><br><span class="line">        q1[i] = q1[i] - bs;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        point pi;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; pi;</span><br><span class="line">        <span class="keyword">if</span> (dian_in_tubao(pi - bs, q1, tail))</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="number">0</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div>]]></content:encoded>
      
      <comments>https://haijeng.github.io/2019/09/16/JSOI2018-%E6%88%98%E4%BA%89/#disqus_thread</comments>
    </item>
    
    <item>
      <title>闵可夫斯基和</title>
      <link>https://haijeng.github.io/2019/09/16/%E9%97%B5%E5%8F%AF%E5%A4%AB%E6%96%AF%E5%9F%BA%E5%92%8C/</link>
      <guid>https://haijeng.github.io/2019/09/16/%E9%97%B5%E5%8F%AF%E5%A4%AB%E6%96%AF%E5%9F%BA%E5%92%8C/</guid>
      <pubDate>Mon, 16 Sep 2019 03:16:09 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;定义&quot;&gt;&lt;a href=&quot;#定义&quot; class=&quot;headerlink&quot; title=&quot;定义&quot;&gt;&lt;/a&gt;定义&lt;/h2&gt;&lt;p&gt;什么是闵可夫斯基和?&lt;br&gt;两个凸包$A$,$B$,那么他们的和$A+B=C$,其中,对于$C$中的每个坐标,都有$(x_C,y_C)=(x
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>什么是闵可夫斯基和?<br>两个凸包$A$,$B$,那么他们的和$A+B=C$,其中,对于$C$中的每个坐标,都有$(x_C,y_C)=(x_A+x_B,y_A+y_B)$.<br>定义为:<br>$A+B=\{a+b\rvert a\in A,b\in B\}$<br>最暴力的解法,便是对$A$中每一个点,都加一遍$B$中的点,复杂度为$O(n*m)$<br>图呢,长这样:<br><img src="https://i.loli.net/2019/09/16/cFJjqxNblYyLgXz.png" alt="1.png"></p><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p>咋出来的啊?<br>将$B$按照,从原点到凸包$A$中每个点的向量为方向,移动出来的.<br>啥??其实长这样:<br><img src="https://i.loli.net/2019/09/16/RK87sa1tv5ncdlN.png" alt="2.png"><br>显然,一个凸包内的向量应该是无穷的.<del>我懒得画了</del><br>将$B$按照如图的向量进行移动,就得到了我们要的$C$<br>但是这显然是不可行的.<br>我们用肉眼观察法,可以知道,这个$C$是由$A$和$B$的边逆时针首尾相接而成的.这样的话,只需要全领出来,然后接起来就完事了.<br>就是这样:</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Minkefusiji</span><span class="params">(point s[], <span class="keyword">int</span>&amp; cnt, point pl1[], <span class="keyword">int</span> tail1, point pl2[], <span class="keyword">int</span> tail2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    s[cnt = <span class="number">1</span>] = pl1[<span class="number">1</span>] + pl2[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tail1; i++)</span><br><span class="line">        pl1[i] = pl1[i + <span class="number">1</span>] - pl1[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tail2; i++)</span><br><span class="line">        pl2[i] = pl2[i + <span class="number">1</span>] - pl2[i];</span><br><span class="line">    <span class="keyword">int</span> a1 = <span class="number">1</span>, a2 = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (a1 &lt;= tail1 &amp;&amp; a2 &lt;= tail2) &#123;</span><br><span class="line">        ++cnt;</span><br><span class="line">        <span class="keyword">if</span> ((pl1[a1] ^ pl2[a2]) &gt;= <span class="number">0</span>)   <span class="comment">//叉积</span></span><br><span class="line">            s[cnt] = s[cnt - <span class="number">1</span>] + pl1[a1++];</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            s[cnt] = s[cnt - <span class="number">1</span>] + pl2[a2++];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (a1 &lt;= tail1)</span><br><span class="line">        ++cnt, s[cnt] = s[cnt - <span class="number">1</span>] + pl1[a1++];</span><br><span class="line">    <span class="keyword">while</span> (a2 &lt;= tail2)</span><br><span class="line">        ++cnt, s[cnt] = s[cnt - <span class="number">1</span>] + pl2[a2++];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>怎么做的?</p><ul><li>首先,起点应是两个凸包最左下角的点的和.</li><li>其次,我们将每个凸包的边改为向量</li><li>每次和$S[cnt-1]$相加,及在求得的凸包上接边,得到下一个边的终点.</li><li>对于两个凸包,我们要选择更优的,及叉积的判断.</li><li>最后,我们再对所得集合进行一次求凸包,就结束了</li></ul><h2 id="例题推荐"><a href="#例题推荐" class="headerlink" title="例题推荐"></a>例题推荐</h2><p><a href="https://www.lydsy.com/JudgeOnline/problem.php?id=2564" target="_blank" rel="noopener">bzoj 2564集合的面积</a><br><a href="https://www.luogu.org/problem/P4557" target="_blank" rel="noopener">JSOI2018战争</a><br>解析:<a href="https://haijeng.github.io/2019/09/16/JSOI2018-%E6%88%98%E4%BA%89/">JSOI2018战争</a></p><h2 id="注"><a href="#注" class="headerlink" title="注"></a>注</h2><p>对于$A-B$,这个等式是这么写的$A-B=\{c\rvert c+B\subseteq A\}$<br>我们称其为闵可夫斯基差<br><del>当然,取反这个骚操作,还是更好用</del></p>]]></content:encoded>
      
      <comments>https://haijeng.github.io/2019/09/16/%E9%97%B5%E5%8F%AF%E5%A4%AB%E6%96%AF%E5%9F%BA%E5%92%8C/#disqus_thread</comments>
    </item>
    
    <item>
      <title>小凸想跑步-半平面交</title>
      <link>https://haijeng.github.io/2019/09/13/%E5%B0%8F%E5%87%B8%E6%83%B3%E8%B7%91%E6%AD%A5/</link>
      <guid>https://haijeng.github.io/2019/09/13/%E5%B0%8F%E5%87%B8%E6%83%B3%E8%B7%91%E6%AD%A5/</guid>
      <pubDate>Fri, 13 Sep 2019 07:52:21 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;题目大意&quot;&gt;&lt;a href=&quot;#题目大意&quot; class=&quot;headerlink&quot; title=&quot;题目大意&quot;&gt;&lt;/a&gt;题目大意&lt;/h2&gt;&lt;p&gt;在一个凸包里,找一个点$p$,使得该点与$\{k,k+1,k\in(1,n-1)\}$组成的三角形面积大于和$\{0,1\}
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h2><p>在一个凸包里,找一个点$p$,使得该点与$\{k,k+1,k\in(1,n-1)\}$组成的三角形面积大于和$\{0,1\}$组成的三角形面积.</p><h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p>首先,我们考虑点的取值范围.<br>必定在凸包内以及凸包的边界上.<br>用<del>线性规划</del>半平面交表示即为:每个边所在直线的左半边区域交集.<br>再考虑,三角形面积关系:<br>$\overrightarrow{(x_1-x,y_1-y)}\times\overrightarrow{(x_0-x,y_0-y)}\leq\overrightarrow{(x_{k+1}-x,y_{k+1}-y)}\times\overrightarrow{(x_k-x,y_k-y)}$<br>然后一堆化简整理之后:<br>$(y_1-y_0-y_{k+1}+y_k)x+(x_0-x_1-x_k+x_{k+1})y+(x_1y_0-x_0y_1-x_{k+1}y_k+x_ky_{k+1})\ge 0$<br>一个形如$ax+by+c\ge 0$的式子就写出来了.<br>对于一个形如上述的式子,该直线的向量为$(b,-a)$,根据这个就可以用两点式表示直线.<br>然后对于$k\in\{1,n-1\}$的点,都求一次直线.<br>再与上面的直线求半平面交.得到符合条件的解即可.</p><div><div class="fold_hider"><div class="close hider_title">代码戳我戳我</div></div><div class="fold"><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> pi = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> inf = <span class="number">1e100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-12</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">point</span> <span class="title">vec</span>;</span> <span class="comment">//向量vec</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span> <span class="comment">//点的基本数据结构</span></span><br><span class="line">    <span class="keyword">double</span> x, y;</span><br><span class="line">    <span class="keyword">double</span> poe;</span><br><span class="line">    point(<span class="keyword">double</span> _x = <span class="number">0</span>, <span class="keyword">double</span> _y = <span class="number">0</span>)</span><br><span class="line">        : x(_x)</span><br><span class="line">        , y(_y)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>*(<span class="keyword">const</span> point&amp; i_T) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x * i_T.x, y * i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>*(<span class="keyword">double</span> u) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x * u, y * u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> point&amp; i_T) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> x == i_T.x &amp;&amp; y == i_T.y;</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>/(<span class="keyword">double</span> u) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x / u, y / u);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>+(<span class="keyword">const</span> point&amp; i_T)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x + i_T.x, y + i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    point <span class="keyword">operator</span>-(<span class="keyword">const</span> point&amp; i_T)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> point(x - i_T.x, y - i_T.y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(point a, point b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.y == b.y ? a.x &lt; b.x : a.y &lt; b.y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, point&amp; a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; a.x &lt;&lt; ' ' &lt;&lt; a.y;</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.2f %.2f"</span>, a.x, a.y);</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; in, point&amp; a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;a.x, &amp;a.y);</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Line</span> <span class="title">Segment</span>;</span> <span class="comment">//线段Segment</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Line</span> &#123;</span> <span class="comment">//直线</span></span><br><span class="line">    point a, b;</span><br><span class="line">    <span class="keyword">double</span> poe;</span><br><span class="line">    Line(point _a = point(), point _b = point())</span><br><span class="line">        : a(_a)</span><br><span class="line">        , b(_b)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> Line&amp; i_T) <span class="keyword">const</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a == i_T.a &amp;&amp; b == i_T.b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> istream&amp; <span class="keyword">operator</span>&gt;&gt;(istream&amp; in, Line&amp; a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a.a &gt;&gt; a.b;</span><br><span class="line">        <span class="keyword">return</span> in;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">friend</span> ostream&amp; <span class="keyword">operator</span>&lt;&lt;(ostream&amp; out, Line&amp; a)</span><br><span class="line">    &#123;</span><br><span class="line">        out &lt;&lt; a.a &lt;&lt; <span class="string">' '</span> &lt;&lt; a.b;</span><br><span class="line">        <span class="keyword">return</span> out;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">atn2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        poe = <span class="built_in">atan2</span>(b.y - a.y, b.x - a.x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">chaji</span><span class="params">(vec A, vec B)</span> <span class="comment">//求向量叉积</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> A.x * B.y - A.y * B.x; <span class="comment">// 正为A-&gt;B左旋</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">zhengfu</span><span class="params">(<span class="keyword">double</span> d)</span> <span class="comment">//判断正负</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(d) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (d &gt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bijiao</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">fabs</span>(x - y) &lt; eps)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Line l1, Line l2)</span> <span class="comment">//半平面交的极角排序</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bijiao(l1.poe, l2.poe) == <span class="number">0</span> ? zhengfu(chaji(l1.b - l1.a, l2.b - l1.a)) &gt; <span class="number">0</span> : l1.poe &lt; l2.poe;</span><br><span class="line">&#125;</span><br><span class="line">point p[MAXN];</span><br><span class="line">Line l[MAXN], q[MAXN];</span><br><span class="line"><span class="function">point <span class="title">zhixian_zhixian_jiaodian</span><span class="params">(Line l1, Line l2)</span> <span class="comment">//两直线交点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> t = ((l1.a.x - l2.a.x) * (l2.a.y - l2.b.y) - (l1.a.y - l2.a.y) * (l2.a.x - l2.b.x)) / ((l1.a.x - l1.b.x) * (l2.a.y - l2.b.y) - (l1.a.y - l1.b.y) * (l2.a.x - l2.b.x));</span><br><span class="line">    <span class="keyword">return</span> l1.a + (l1.b - l1.a) * t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">duobianxingmianji</span><span class="params">(point po[], <span class="keyword">int</span> num)</span> <span class="comment">//多边形面积</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line">    po[num + <span class="number">1</span>] = po[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= num; i++)</span><br><span class="line">        ans += chaji(po[i], po[i + <span class="number">1</span>]);</span><br><span class="line">    ans = <span class="built_in">fabs</span>(ans) * <span class="number">0.5</span>;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> head, <span class="keyword">int</span> tail)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    q[tail + <span class="number">1</span>] = q[head];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = head; i &lt;= tail; i++)</span><br><span class="line">        p[++num] = zhixian_zhixian_jiaodian(q[i], q[i + <span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (num &lt; <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> duobianxingmianji(p, num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(Line a, Line b, Line c)</span> <span class="comment">//判断a,b交点是否在c的右边</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    point o = zhixian_zhixian_jiaodian(a, b);</span><br><span class="line">    <span class="keyword">return</span> zhengfu(chaji(c.b - c.a, o - c.a)) &lt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">banpingmian_jiao</span><span class="params">(<span class="keyword">int</span>&amp; head, <span class="keyword">int</span>&amp; tail, Line L[], <span class="keyword">int</span> t)</span> <span class="comment">//求半平面交</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sort(L + <span class="number">1</span>, L + t + <span class="number">1</span>, cmp);</span><br><span class="line">    head = <span class="number">1</span>, tail = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; t; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bijiao(L[i].poe, L[i + <span class="number">1</span>].poe) == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        L[++cnt] = L[i]; <span class="comment">//因为排过序，即使极角相同，后面的也比前面的优</span></span><br><span class="line">    &#125;</span><br><span class="line">    L[++cnt] = L[t];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++) &#123;</span><br><span class="line">        <span class="keyword">while</span> (head &lt; tail &amp;&amp; check(q[tail - <span class="number">1</span>], q[tail], L[i]))</span><br><span class="line">            tail--;</span><br><span class="line">        <span class="keyword">while</span> (head &lt; tail &amp;&amp; check(q[head + <span class="number">1</span>], q[head], L[i]))</span><br><span class="line">            head++;</span><br><span class="line">        q[++tail] = L[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (head &lt; tail &amp;&amp; check(q[tail - <span class="number">1</span>], q[tail], q[head]))</span><br><span class="line">        tail--;</span><br><span class="line">    <span class="keyword">while</span> (head &lt; tail &amp;&amp; check(q[head + <span class="number">1</span>], q[head], q[tail]))</span><br><span class="line">        head++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; p[i];</span><br><span class="line">    p[n + <span class="number">1</span>] = p[<span class="number">1</span>];</span><br><span class="line">    ans=duobianxingmianji(p,n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">        l[i] = Line(p[i], p[i + <span class="number">1</span>]);</span><br><span class="line">        l[i].atn2();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> t = n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">double</span> a = (p[<span class="number">2</span>] - p[<span class="number">1</span>] - p[i + <span class="number">1</span>] + p[i]).y;</span><br><span class="line">        <span class="keyword">double</span> b = (p[<span class="number">1</span>] - p[<span class="number">2</span>] - p[i] + p[i + <span class="number">1</span>]).x;</span><br><span class="line">        <span class="keyword">double</span> c = p[<span class="number">2</span>].x * p[<span class="number">1</span>].y - p[<span class="number">1</span>].x * p[<span class="number">2</span>].y - p[i + <span class="number">1</span>].x * p[i].y + p[i].x * p[i + <span class="number">1</span>].y;</span><br><span class="line">        <span class="keyword">if</span> (zhengfu(a) == zhengfu(b) &amp;&amp; zhengfu(a) == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (zhengfu(a)!=<span class="number">0</span>) &#123;</span><br><span class="line">            l[++t] = Line(point(-c / a, <span class="number">0</span>), point(-c / a + b, -a));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (zhengfu(b)!=<span class="number">0</span>) &#123;</span><br><span class="line">            l[++t] = Line(point(<span class="number">0</span>, -c / b), point(b, -c / b - a));</span><br><span class="line">        &#125;</span><br><span class="line">        l[t].atn2();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> head, tail;</span><br><span class="line">    banpingmian_jiao(head, tail, l, t);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.4f\n"</span>, solve(head, tail)/ans);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div>]]></content:encoded>
      
      <comments>https://haijeng.github.io/2019/09/13/%E5%B0%8F%E5%87%B8%E6%83%B3%E8%B7%91%E6%AD%A5/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
